<!DOCTYPE html>
<html>
    <head>
        <title>
            Implementing a WebSocket Server in C
        </title>
        <link href="../index.css" rel="stylesheet" />
        <link href="../article.css" rel="stylesheet" />
    </head>
    <body>
        <div class="article">
            <h1 class="title">
                Implementing a WebSocket Server in C
            </h1>
            <h3 class="byline">
                <span class="author">
                    Luke DiGiovanna
                </span>
                -
                <span class="date">
                    10/8/2024
                </span>
            </h3>
            <hr />
            <div class="content">
                <p>The WebSocket standard is useful for persistent two-way communication in web-based environments. This is what enables real time applications in browsers such as chat applications and multiplayer games.</p>
<p>WebSockets are an upgraded HTTP connection that is built on TCP. </p>
<p>For more information on the standard, refer to the <a href="https://datatracker.ietf.org/doc/rfc6455/?include_text=1">RFC 6455</a>.</p>
<p>This article will walk through the development of the simplest implementation of a WebSocket server in C using only Linux system calls (no libraries!)</p>
<h2>TCP</h2>
<p>To be able to establish a WebSocket connection, we need to be able to handle HTTP requests, which is just a protocol built on top of TCP. So really the first thing we need to do is set up a server to receive TCP connections.</p>
<h3>Connecting a server</h3>
<p>We open a socket to receive connections with the <code>socket(2)</code> system call as follows. (Note that I omitted error checking after syscalls here to make the important functionality clear, but it is good practice to always check for return errors when making syscalls).</p>
<pre><code class="language-c">// Set up a socket server
int server_socket_fd;
struct sockaddr_in server_address;

// Create socket file descriptor
server_socket_fd = socket(AF_INET, SOCK_STREAM, 0);

server_address.sin_family = AF_INET;
server_address.sin_port = htons(PORT);
server_address.sin_addr.s_addr = htonl(INADDR_ANY);

// Bind the socket file descriptor to the address
bind(server_socket_fd, &amp;server_address, sizeof(struct sockaddr_in));
</code></pre>
<h3>Receiving clients</h3>
<p>After configuring the server socket, we tell it to </p>
<h2>Resources Used</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview">Mozilla's HTTP Overview</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers">Mozila's Writing WebSocket servers</a></p>
            </div>
        </div>
    </body>
</html>